# ğŸŒ¿ HERB Scraper í”„ë¡œì íŠ¸

---

## ğŸ“Œ **í”„ë¡œì íŠ¸ ê°œìš”**  
herb-scraperëŠ” TCMSP (Traditional Chinese Medicine Systems Pharmacology) ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ í•œì•½ì¬ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ í¬ë¡¤ë§í•˜ê³  ì „ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” Python ê¸°ë°˜ì˜ ìŠ¤í¬ë˜í¼ì…ë‹ˆë‹¤. ì—°êµ¬ì ë° ê°œë°œìê°€ ë¹ ë¥´ê²Œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  í•„í„°ë§í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ ì•½ë¦¬í•™ ì—°êµ¬ì— í™œìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤.

---

## âœ… **ì£¼ìš” ê¸°ëŠ¥:**  
1. **TCMSP ë°ì´í„° í¬ë¡¤ë§**: ì§€ì •ëœ í•œì•½ì¬ì˜ ì„±ë¶„ ë° íƒ€ê²Ÿ ì •ë³´ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤.
2. **ë°ì´í„° ì „ì²˜ë¦¬(í•„í„°ë§)**: OB(ê²½êµ¬ì´ìš©ë¥ )ì™€ DL(ì•½ë¬¼ ìœ ì‚¬ì„±) ê¸°ì¤€ìœ¼ë¡œ ì„±ë¶„ê³¼ íƒ€ê²Ÿ ë°ì´í„°ë¥¼ í•„í„°ë§í•©ë‹ˆë‹¤.
3. **ë‹¤ì–‘í•œ í¬ë§· ì§€ì›**: í¬ë¡¤ë§ ë° í•„í„°ë§ëœ ë°ì´í„°ë¥¼ JSON, CSV, Excel íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.
4. **ì‚¬ìš©ì ì¹œí™”ì  ì„¤ì •**: config/settings.pyì—ì„œ ë°ì´í„° ê²½ë¡œ ë° í•„í„°ë§ ì„ê³„ê°’ì„ ì†ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ—‚ï¸ **ë””ë ‰í† ë¦¬ êµ¬ì¡°**
```bash
herb-scraper/
â”œâ”€â”€ README.md                          # âœ… í”„ë¡œì íŠ¸ ì„¤ëª… ë¬¸ì„œ
â”œâ”€â”€ requirements.txt                   # âœ… Python íŒ¨í‚¤ì§€ ëª©ë¡
â”œâ”€â”€ venv/                              # âœ… ê°€ìƒí™˜ê²½ ë””ë ‰í† ë¦¬
â”‚
â”œâ”€â”€ config/                            # âš™ï¸ ì„¤ì • ê´€ë ¨
â”‚   â””â”€â”€ settings.py                    # í™˜ê²½ ì„¤ì • (ê²½ë¡œ, í•„í„°ë§ ì„ê³„ê°’ ë“±)
â”‚
â”œâ”€â”€ modules/                           # ğŸ§© ì½”ë“œ ëª¨ë“ˆ (TCMSP ì „ìš©)
â”‚   â”œâ”€â”€ data_utils.py                  # ğŸŒ ë°ì´í„° ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°
â”‚   â”œâ”€â”€ logger.py                      # ğŸ“ ë¡œê·¸ ê¸°ë¡
â”‚   â””â”€â”€ tcmsp_utils.py                 # ğŸŒ TCMSP í¬ë¡¤ë§ ëª¨ë“ˆ
â”‚
â”œâ”€â”€ preprocess/                        # ğŸ§¹ ì „ì²˜ë¦¬ ê´€ë ¨
â”‚   â””â”€â”€ tcmsp_process.py               # ë°ì´í„° í•„í„°ë§
â”‚
â”œâ”€â”€ scripts/                           # ğŸš€ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”‚   â””â”€â”€ tcmsp_scraper.py               # TCMSP í¬ë¡¤ë§ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”‚
â””â”€â”€ data/                              # ğŸ“‚ ë°ì´í„° ì €ì¥
    â””â”€â”€ tcmsp/                         # ğŸ“¥ TCMSP ë°ì´í„°
```

---
## ğŸ—ºï¸ **ğŸ“Š íŒŒì´í”„ë¼ì¸ íë¦„ë„**

```mermaid
graph TD
    A[herb-scraper/] --> B[README.md: í”„ë¡œì íŠ¸ ì„¤ëª… ë¬¸ì„œ]
    A --> C[requirements.txt: Python íŒ¨í‚¤ì§€ ëª©ë¡]
    A --> D[venv/: ê°€ìƒí™˜ê²½ ë””ë ‰í† ë¦¬]

    A --> E[config/: ì„¤ì • ê´€ë ¨]
    E --> E1[settings.py: ê²½ë¡œ ë° í•„í„°ë§ ì„ê³„ê°’ ì„¤ì •]

    A --> F[modules/: ì½”ë“œ ëª¨ë“ˆ (TCMSP ì „ìš©)]
    F --> F1[data_utils.py: ë°ì´í„° ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° ë° WebDriver ì„¤ì •]
    F --> F2[logger.py: ë¡œê·¸ ê¸°ë¡ ëª¨ë“ˆ]
    F --> F3[tcmsp_utils.py: TCMSP í¬ë¡¤ë§ ëª¨ë“ˆ]

    A --> G[preprocess/: ì „ì²˜ë¦¬ ê´€ë ¨]
    G --> G1[tcmsp_process.py: ë°ì´í„° í•„í„°ë§ ë° ì €ì¥]

    A --> H[scripts/: ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸]
    H --> H1[tcmsp_scraper.py: TCMSP í¬ë¡¤ë§ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸]

    A --> I[data/: ë°ì´í„° ì €ì¥]
    I --> I1[tcmsp/: TCMSP ì›ë³¸ ë° í•„í„°ë§ ë°ì´í„°]
```

---

## ğŸ› ï¸ **ì„¤ì¹˜ ë° ì‹¤í–‰ ë°©ë²•**
### 1ï¸âƒ£ ê°€ìƒí™˜ê²½ ì„¤ì •
```bash
python -m venv venv
source venv/bin/activate      # Mac/Linux
venv\Scripts\activate        # Windows
pip install -r requirements.txt
```

### 2ï¸âƒ£ í¬ë¡¤ë§ ì‹¤í–‰
```bash
python scripts/tcmsp_scraper.py
```
- **í¬ë¡¤ë§ ëŒ€ìƒ ì•½ì¬**: scripts/tcmsp_scraper.py ë‚´ë¶€ì˜ herbs ë”•ì…”ë„ˆë¦¬ì—ì„œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ë°ì´í„° ì €ì¥ ê²½ë¡œ**: í¬ë¡¤ë§ëœ ë°ì´í„°ëŠ” data/tcmsp/ì— JSON ë° CSV í˜•ì‹ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.

### 3ï¸âƒ£ í¬ë¡¤ë§ ì‹¤í–‰
```bash
python preprocess/tcmsp_process.py
```
- **í•„í„°ë§ ê¸°ì¤€**: config/settings.pyì—ì„œ OB_THRESHOLDì™€ DL_THRESHOLD ê°’ ì¡°ì • ê°€ëŠ¥í•©ë‹ˆë‹¤.
- **ì¶œë ¥ ê²°ê³¼**: í•„í„°ë§ëœ ë°ì´í„°ëŠ” data/tcmsp/ í´ë”ì— JSON, CSV, Excel íŒŒì¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.


---
## âš™ï¸ ì„¤ì • ì„¤ëª… (`config/settings.py`)

```markdown
| ì„¤ì • ë³€ìˆ˜              | ì„¤ëª…                             | ê¸°ë³¸ê°’    |
|-----------------------|----------------------------------|---------|
| `OB_THRESHOLD`        | OB(ê²½êµ¬ì´ìš©ë¥ ) í•„í„°ë§ ì„ê³„ê°’     | `30`    |
| `DL_THRESHOLD`        | DL(ì•½ë¬¼ ìœ ì‚¬ì„±) í•„í„°ë§ ì„ê³„ê°’    | `0.18`  |
| `HERB_GROUP_NAME`     | ë°ì´í„° ê·¸ë£¹ ì´ë¦„                | `ì „ì²´_ì•½ì¬` |
| `RAW_DATA_PATH`       | í¬ë¡¤ë§ ì›ë³¸ ë°ì´í„° ê²½ë¡œ         | ìë™ ì„¤ì • |
| `PROCESSED_EXCEL_PATH`| í•„í„°ë§ ë°ì´í„° Excel ì €ì¥ ê²½ë¡œ   | ìë™ ì„¤ì • |
```

---

## ğŸ“Š ì¶œë ¥ ë°ì´í„° ì˜ˆì‹œ

### âœ… í¬ë¡¤ë§ëœ ì›ë³¸ ë°ì´í„° (`tcmsp_raw_results_ì „ì²´_ì•½ì¬.json`)

```json
{
  "í™©ê¸ˆ": {
    "ingredients": [
      {
        "mol_id": "MOL000173",
        "mol_name": "baicalin",
        "ob": 41.15,
        "dl": 0.75,
        "mol_url": "https://tcmsp-e.com/..."
      }
    ],
    "targets": [
      {
        "mol_id": "MOL000173",
        "target_name": "EGFR",
        "drugbank_id": "DB00001"
      }
    ]
  }
}
```

---

### âœ… í•„í„°ë§ëœ ë°ì´í„° (`tcmsp_filtered_targets_ì „ì²´_ì•½ì¬.xlsx`)

```markdown
| mol_id     | mol_name | ob    | dl    | target_name | drugbank_id |
|------------|----------|-------|-------|-------------|-------------|
| MOL000173  | baicalin | 41.15 | 0.75  | EGFR        | DB00001     |
```

---

## ğŸ§© ì£¼ìš” ì½”ë“œ ì„¤ëª…

```markdown
### ğŸ“ `modules/`
- **`data_utils.py`**: ë°ì´í„° ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° ë° Selenium WebDriver ì„¤ì •.
- **`logger.py`**: ì¼ê´€ëœ ë¡œê·¸ ì¶œë ¥ ì§€ì›.
- **`tcmsp_utils.py`**: ì„±ë¶„ ë° íƒ€ê²Ÿ í¬ë¡¤ë§ ë¡œì§ í¬í•¨.

### ğŸ“ `preprocess/`
- **`tcmsp_process.py`**: í¬ë¡¤ë§ëœ ë°ì´í„°ë¥¼ OB, DL ê¸°ì¤€ìœ¼ë¡œ í•„í„°ë§ ë° íŒŒì¼ ì €ì¥.

### ğŸ“ `scripts/`
- **`tcmsp_scraper.py`**: í¬ë¡¤ë§ì„ ì‹œì‘í•˜ëŠ” ë©”ì¸ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸.
```

---


## ğŸ“œ **ë¼ì´ì„ ìŠ¤**
MIT License  
Â© 2025 ìƒì§€í•œì˜ í•™ìˆ ì œ

---

## ğŸ‘©â€ğŸ’» **ê°œë°œì ì •ë³´**
í”„ë¡œì íŠ¸ ë‹´ë‹¹: ì„œê°•ëŒ€í•™êµ êµ­ì–´êµ­ë¬¸í•™ê³¼ ê¹€í˜„ì„œ  
ğŸ“§ ì´ë©”ì¼: neulbokim@sogang.ac.kr  
ğŸŒ GitHub: github.com/neulbokim